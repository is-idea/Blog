<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; Charset=gb2312">
    <meta http-equiv="Content-Language" content="zh-CN">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>文章专栏</title>
    <link rel="shortcut icon" th:href="@{/images/Logo_40.png}" type="image/x-icon">
    <!--Layui-->
    <link th:href="@{/plug/layui/css/layui.css}" rel="stylesheet" />
    <!--font-awesome-->
    <link th:href="@{/plug/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
    <!--全局样式表-->
    <link th:href="@{/css/global.css}" rel="stylesheet" />
    <!--本页样式表-->
    <link th:href="@{/css/article.css}" rel="stylesheet" />
</head>
<body>
    <!-- 导航 -->
    <div th:include="nav" />

    <!-- 主体（一般只改变这里的内容） -->
    <div class="blog-body">
        <!-- canvas -->
        <canvas id="canvas-banner" style="background: #393D49;"></canvas>
        <!--为了及时效果需要立即设置canvas宽高，否则就在home.js中设置-->
        <script type="text/javascript">
            var canvas = document.getElementById('canvas-banner');
            canvas.width = window.document.body.clientWidth - 10;//减去滚动条的宽度
            if (screen.width >= 992) {
                canvas.height = window.innerHeight * 1 / 3;
            } else {
                canvas.height = window.innerHeight * 2 / 7;
            }
        </script>

        <div class="blog-container">
            <blockquote class="layui-elem-quote sitemap layui-breadcrumb shadow">
                <a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/home.html" title="网站首页">网站首页</a>
                <a><cite>文章专栏</cite></a>
            </blockquote>
            <div class="blog-main">
                <!--左边文章列表-->
                <div class="blog-main-left" id="demo">

                </div>
                <!--右边-->
                <div class="blog-main-right">
                    <!--搜索框-->
                    <div class="blog-search">
                        <form class="layui-form" action="">
                            <div class="layui-form-item">
                                <div class="search-keywords  shadow">
                                    <input type="text" name="keywords" lay-verify="required" placeholder="输入关键词搜索" autocomplete="off" class="layui-input">
                                </div>
                                <div class="search-submit  shadow">
                                    <a class="search-btn" lay-submit="formSearch" lay-filter="formSearch"><i class="fa fa-search"></i></a>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="article-category shadow" >
                        <div class="article-category-title" id="type">
                            分类导航
                        </div>

                        <div class="clear"></div>
                    </div>
                    <div class="blog-module shadow">
                        <div class="blog-module-title">作者推荐</div>
                        <ul class="fa-ul blog-module-ul">
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">Web安全之跨站请求伪造CSRF</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">ASP.NET MVC 防范跨站请求伪造（CSRF）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">C#基础知识回顾-扩展方法</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（一）（HTML篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（二）（CSS篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（三）（JS篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">写了个Win10风格快捷菜单！</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">ASP.NET MVC自定义错误页</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">ASP.NET MVC制作404跳转（非302和200）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">基于laypage的layui扩展模块（pagesize.js）！</a></li>
                        </ul>
                    </div>
                    <div class="blog-module shadow">
                        <div class="blog-module-title">随便看看</div>
                        <ul class="fa-ul blog-module-ul">
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（一）（HTML篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">ASP.NET MVC制作404跳转（非302和200）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">ASP.NET MVC 防范跨站请求伪造（CSRF）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（三）（JS篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">基于laypage的layui扩展模块（pagesize.js）！</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">一步步制作时光轴（二）（CSS篇）</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">写了个Win10风格快捷菜单！</a></li>
                            <li><i class="fa-li fa fa-hand-o-right"></i><a href="../../../../../../Blog的副本/blog-before/src/main/resources/templates/detail.html">常用正则表达式</a></li>
                        </ul>
                    </div>
                    <!--右边悬浮 平板或手机设备显示-->
                    <div class="category-toggle"><i class="fa fa-chevron-left"></i></div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
    <!-- 底部 -->
    <div th:include="footer"/>
    <!--分享窗体-->
    <div class="blog-share layui-hide">
        <div class="blog-share-body">
            <div style="width: 200px;height:100%;">
                <div class="bdsharebuttonbox">

                </div>
            </div>
        </div>
    </div>
    <!--遮罩-->
    <div class="blog-mask animated layui-hide"></div>
    <!-- layui.js -->
    <script th:src="@{/plug/layui/layui.js}"></script>
    <!-- 全局脚本 -->
    <script th:src="@{/js/global.js}"></script>
    <!-- 本页脚本 -->
    <script th:src="@{/js/home.js}"></script>
<script>

layui.use(['jquery','flow'],function(){
    var $ = layui.jquery;
    var flow = layui.flow;
    //页面加载完成之后立即执行
    $(function(){
        $.ajax({
            type: "get",
            url: "/article/column",
            dataType: "json",
            success: function(result){
                //打印
                console.log(result);
                var html = "";
                $(result.typeList).each(function(index,typeList){
                    //根据文章类别查询
                    html+='<a href="javascript:void(0);" onclick="typeSelect('+typeList.id+');">'+typeList.typeName+'</a>';
                });
                $("#type").after(html);
            }
        });
    });

    //查询分类文章列表
    typeSelect= function (id){
        $('#demo').empty();
        flow.load({
            elem: '#demo' //指定列表容器
            ,isLazyimg: true
            ,done: function(page, next){ //到达临界点（默认滚动触发），触发下一页
                //以jQuery的Ajax请求为例，请求下一页数据（注意：page是从2开始返回）
                $.get('/index/?page='+page+'&type='+id, function(res){
                    var lis = [];
                    console.log(res);
                    //假设你的列表返回在data集合中
                    layui.each(res.data, function(index, item){
                        lis.push('<div class="article shadow">');
                        lis.push('<div class="article-left">');
                        lis.push('<img lay-src="'+item.head+'" alt="" style="height:80px;"/>');
                        lis.push('</div>');
                        lis.push('<div class="article-right">');
                        lis.push('<div class="article-title" style="margin: 20px 0px;">');
                        lis.push('<a href="javascript:void(0)">'+item.title+'</a>');
                        lis.push('<input type="hidden" value="'+item.articleId+'">');
                        lis.push(' </div>');
                        lis.push('</div>');
                        lis.push('<div class="clear"></div>');
                        lis.push('<div class="article-footer">');
                        lis.push('<span><i class="fa fa-clock-o"></i>&nbsp;&nbsp;'+item.createDate+'</span>');
                        lis.push('<span class="article-author"><i class="fa fa-user"></i>&nbsp;&nbsp;'+item.nickname+'</span>');
                        lis.push('<span><i class="fa fa-tag"></i>&nbsp;&nbsp;<a href="#">'+item.typeName+'</a></span>');
                        lis.push('<span class="article-viewinfo"><i class="fa fa-commenting"></i>&nbsp;4</span>');
                        lis.push('</div>');
                        lis.push('</div>');
                    });

                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < res.totalPage);
                });
            }
        });
    }
});

//文章分类查询


</script>
</body>
</html>